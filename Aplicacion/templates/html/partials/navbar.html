{% load static %}
<header class="header-wrapper">
  <!-- Overlay buscador -->
  <div id="buscador-overlay" class="buscador-overlay">
    <form method="get" action="{% url 'buscar_rutas' %}">
      <input type="text" name="q" placeholder="¿Qué deseas encontrar?" autofocus>
      <button type="submit">Buscar</button>
      <span class="cerrar" onclick="ocultarBuscador()">✖</span>
    </form>
  </div>

  <!-- NAVBAR -->
  <nav class="main-nav">
    <div class="nav-brand">
      <img src="{% static '/images/imagenes/logo.jpg' %}" alt="Walk App Logo" class="nav-logo"/>
      <h1 class="nav-title">Walk App</h1>
    </div>

    <div class="nav-center-wrapper">
      <div class="nav-center">
        <ul class="nav-links">
          <li><a href="{% url 'home' %}">Inicio</a></li>
          <li><a href="{% url 'comunidad' %}">Comunidad</a></li>
          <li><a href="{% url 'juegos' %}">Juegos</a></li>
          <li><a href="{% url 'rutas' %}">Rutas</a></li>
          <li><a href="{% url 'ranking' %}">Ranking</a></li>

          {% if user.is_authenticated and user.is_superuser %}
            <li><a href="{% url 'admin_dashboard' %}" data-icon="&#xf0e4;">Panel Admin</a></li>
            <li><a href="{% url 'admin_usuarios' %}" data-icon="&#xf0c0;">Usuarios</a></li>
            <li><a href="{% url 'admin_rutas' %}" data-icon="&#xf279;">Gestionar Rutas</a></li>
            <li><a href="{% url 'admin_reportes' %}" data-icon="&#xf24a;">Reportes</a></li>
            <li><a href="{% url 'admin_estadisticas' %}" data-icon="&#xf201;">Estadísticas</a></li>
          {% endif %}
        </ul>
      </div>
    </div>

    <div class="nav-right">
      <form class="nav-search" onsubmit="mostrarBuscador(); return false;">
        <button type="submit" class="nav-icon-button" aria-label="Buscar">
          <i class="fas fa-search"></i>
        </button>
      </form>

      {% if user.is_authenticated %}
        <a href="{% url 'perfil_usuario' %}" class="btn-profile-icon" aria-label="Perfil de usuario">
          <i class="fas fa-user-circle"></i>
        </a>
        <form action="{% url 'logout' %}" method="post">
          {% csrf_token %}
          <button class="cerrar" type="submit">Cerrar Sesión</button>
        </form>
      {% else %}
        <a href="{% url 'registro' %}" class="btn-login">Registrarse</a>
        <a href="{% url 'login' %}" class="btn-login">Iniciar Sesión</a>
      {% endif %}
    </div>

    <div class="hamburger">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </nav>

  <!-- MENÚ MÓVIL -->
  <div id="mobileMenu" class="mobile-menu">
    <div class="menu-header">
      <img src="{% static '/images/imagenes/logo.jpg' %}" alt="Walk App Logo" class="nav-logo" />
      <h1 class="mobile-menu-titulo">WALK APP</h1>
      <button id="closeMenu" class="close-btn" aria-label="Cerrar menú">&times;</button>
    </div>

    <a href="{% url 'home' %}">Inicio</a>
    <a href="{% url 'comunidad' %}">Comunidad</a>
    <a href="{% url 'juegos' %}">Juegos</a>
    <a href="{% url 'rutas' %}">Rutas</a>
    <a href="{% url 'ranking' %}">Ranking</a>

    {% if user.is_authenticated and user.is_superuser %}
      <a href="{% url 'admin_dashboard' %}">Panel Admin</a>
      <a href="{% url 'admin_usuarios' %}">Usuarios</a>
      <a href="{% url 'admin_rutas' %}">Gestionar Rutas</a>
      <a href="{% url 'admin_reportes' %}">Reportes</a>
      <a href="{% url 'admin_estadisticas' %}">Estadísticas</a>
    {% endif %}

    {% if user.is_authenticated %}
      <a href="{% url 'perfil_usuario' %}" class="btn-profile-icon mobile-menu-item">
        <i class="fas fa-user-circle"></i> Mi Perfil
      </a>
      <a href="{% url 'logout' %}" class="btn-login mobile-menu-item">Cerrar Sesión</a>
    {% else %}
      <a href="{% url 'registro' %}" class="btn-login mobile-menu-item">Registrarse</a>
      <a href="{% url 'login' %}" class="btn-login mobile-menu-item">Iniciar Sesión</a>
    {% endif %}

    <form class="nav-search">
      <div class="input-icon-wrapper">
        <input type="text" placeholder="Buscar" class="nav-input" />
        <button type="submit" class="nav-button-inside" aria-label="Buscar"></button>
      </div>
    </form>
  </div>
</header>

<script src="{% static 'scripts.js'%}"></script>
